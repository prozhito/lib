import{__awaiter as e,__generator as r}from"../../../node_modules/tslib/tslib.es6.js";import{getCookieValue as o}from"../utils.js";import{getUser as n}from"./current.js";import{getNewToken as s}from"./refresh.js";var t=function(t,i){return void 0===t&&(t=""),void 0===i&&(i=""),e(void 0,void 0,void 0,(function(){var e,c;return r(this,(function(r){switch(r.label){case 0:return t||"undefined"==typeof window||(t=o("access")),console.log("have Token:",!!t),t?[4,n(t)]:[3,2];case 1:if(!(c=r.sent()).error)return[2,c];r.label=2;case 2:return i||"undefined"==typeof window||(i=o("refresh")),console.log("have Refresh:",!!i),i?[4,s(i)]:[3,5];case 3:return e=r.sent().access,console.log("new Token:",!!e),e?[4,n(e)]:[3,5];case 4:if(!(c=r.sent()).error)return[2,c];r.label=5;case 5:return[2,{error:"No token"}]}}))}))};export{t as authWithToken};
//# sourceMappingURL=auth.js.map
