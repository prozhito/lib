import{__awaiter as e,__generator as r}from"tslib";import{getCookieValue as o}from"../utils.js";import{getUser as n}from"./current.js";import{getNewToken as t}from"./refresh.js";var s=function(s,i){return void 0===s&&(s=""),void 0===i&&(i=""),e(void 0,void 0,void 0,(function(){var e,c;return r(this,(function(r){switch(r.label){case 0:return s||"undefined"==typeof window||(s=o("access")),console.log("have Token:",!!s),s?[4,n(s)]:[3,2];case 1:if(!(c=r.sent()).error)return[2,c];r.label=2;case 2:return i||"undefined"==typeof window||(i=o("refresh")),console.log("have Refresh:",!!i),i?[4,t(i)]:[3,5];case 3:return e=r.sent().access,console.log("new Token:",!!e),e?[4,n(e)]:[3,5];case 4:if(!(c=r.sent()).error)return[2,c];r.label=5;case 5:return[2,{error:"No token"}]}}))}))};export{s as authWithToken};
//# sourceMappingURL=auth.js.map
