import{__awaiter as t,__assign as r,__generator as e}from"../../node_modules/tslib/tslib.es6.js";import{authWithToken as i}from"./actions/auth.js";import{authWithCredentials as o}from"./actions/login.js";var n=function(){function n(t){if(this._user=null,this._loading=!1,this._error="",t&&!n._updateCallback&&(n._updateCallback=t),n._instance)return n._instance;n._instance=this,this.auth=this.auth.bind(this),this.login=this.login.bind(this),this.info=this.info.bind(this),this.logout=this.logout.bind(this)}return Object.defineProperty(n.prototype,"user",{set:function(t){this._user=r({},t)},enumerable:!1,configurable:!0}),n.prototype.auth=function(o,u){return void 0===o&&(o=""),void 0===u&&(u=""),t(this,void 0,void 0,(function(){var t=this;return e(this,(function(e){return this._loading=!0,this._error="",this._user=null,n._updateCallback&&n._updateCallback(),[2,i(o,u).then((function(e){return e&&e.error?t._error=e.error:t._user=r({},e.user),t._loading=!1,n._updateCallback&&n._updateCallback(),e}))]}))}))},n.prototype.login=function(t){var e=this;this._loading=!0,this._error="",this._user=null,n._updateCallback&&n._updateCallback(),o(t).then((function(t){t&&t.error?e._error=t.error:e._user=r({},t.user),e._loading=!1,n._updateCallback&&n._updateCallback()}))},n.prototype.logout=function(){console.log("logout"),"undefined"!=typeof document&&(document.cookie="access= ; expires = Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh= ; expires = Thu, 01 Jan 1970 00:00:00 GMT"),this._error="",this._user=null,n._updateCallback&&n._updateCallback()},n.prototype.info=function(){return{loading:this._loading,error:this._error,user:this._user}},n._updateCallback=null,n}();export{n as Account};
//# sourceMappingURL=account.js.map
