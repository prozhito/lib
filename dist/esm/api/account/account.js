import{__assign as t}from"../../node_modules/tslib/tslib.es6.js";import{authWithCredentials as e}from"./actions/login.js";var o=function(){function o(t){if(this._user=null,this._loading=!1,this._error="",t&&!o._updateCallback&&(o._updateCallback=t),o._instance)return o._instance;o._instance=this,this.login=this.login.bind(this),this.info=this.info.bind(this),this.logout=this.logout.bind(this)}return Object.defineProperty(o.prototype,"user",{set:function(e){this._user=t({},e)},enumerable:!1,configurable:!0}),o.prototype.login=function(i){var r=this;this._loading=!0,this._error="",this._user=null,o._updateCallback&&o._updateCallback(),e(i).then((function(e){e&&e.error?r._error=e.error:r._user=t({},e.user),r._loading=!1,o._updateCallback&&o._updateCallback()}))},o.prototype.logout=function(){console.log("logout"),"undefined"!=typeof document&&(document.cookie="access= ; expires = Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh= ; expires = Thu, 01 Jan 1970 00:00:00 GMT"),this._error="",this._user=null,o._updateCallback&&o._updateCallback()},o.prototype.info=function(){return{loading:this._loading,error:this._error,user:this._user}},o._updateCallback=null,o}();export{o as Account};
//# sourceMappingURL=account.js.map
