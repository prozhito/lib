import{__awaiter as e,__generator as r}from"../../node_modules/tslib/tslib.es6.js";import t from"react";import{Header as n}from"./header.js";import{getContextData as o}from"../../api/context/get.js";import{cookies as i}from"next/headers";import"../../api/account/account.js";import{authWithToken as a}from"../../api/account/actions/auth.js";function u(){var t,n;return e(this,void 0,void 0,(function(){var e,o,u,c;return r(this,(function(r){switch(r.label){case 0:return e=i(),o=[null===(t=e.get("access"))||void 0===t?void 0:t.value,null===(n=e.get("refresh"))||void 0===n?void 0:n.value],c=o[1],(u=o[0])||c?[4,a(u,c)]:[3,2];case 1:return[2,r.sent()];case 2:return[2]}}))}))}function c(){return e(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,o().then((function(e){var r=e.data;return!e.error&&r&&r.main_menu?r.main_menu:[]}))];case 1:return[2,e.sent()]}}))}))}var s=function(o){var i=o.main_menu,a=o.account,s=void 0!==a&&a;return e(void 0,void 0,void 0,(function(){var e,o,a;return r(this,(function(r){switch(r.label){case 0:return console.log("ProzhitoHeader Server:","undefined"==typeof window),s?[4,u()]:[3,2];case 1:return o=r.sent(),[3,3];case 2:o={user:void 0,error:""},r.label=3;case 3:return e=o,(a=i)?[3,5]:[4,c()];case 4:a=r.sent(),r.label=5;case 5:return i=a,[2,t.createElement(n,{main_menu:i,account:s,user_data:e})]}}))}))};export{s as ProzhitoHeader};
//# sourceMappingURL=index.js.map
